<section>
    <br>
    <br>
    <div class="food-link-box">

        <a class="food-link" ng-click="$ctrl.toggleSearch()">Search for Food Item</a>
        <div class="food-search" add="$ctrl.search" ng-show="$ctrl.viewSearch === true">
            <section ng-class="$ctrl.styles['add-class']">
              
                <div>
                <label>Barcode (UPC):</label>
                <input ng-model="$ctrl.searchBarcode" placeholder="food UPC search">
                <label>Name of food:</label>
                <input ng-model="$ctrl.searchName" placeholder="food name search">
                </div>

                <h2 class="white-text" ng-if="$ctrl.notFound">No results found for barcode: "{{$ctrl.searchBarcode}}" or name: "{{$ctrl.searchName}}".</h2>
                <!--<div>
                <!--<label>Type of food:</label>
                <input ng-model="$ctrl.type" placeholder="type">
                </div>-->-->
                <button class="viewButton" ng-click="$ctrl.search()">Search</button>
             </section>

             <div class="search-results" ng-if="$ctrl.results" ng-repeat="result in $ctrl.results">
             
            <h3>{{result.name}}</h3>
            <table ="search-detail-table">
                <tr>
                    <th>Calories</th>  <td class="result-item-value">{{result.Calories}}</td>
                    <th>New Calories</th><td class="result-item-value">{{$ctrl.result.newCalories}}</td>
                </tr>
                <tr>
                    <th>Sugars (g)</th><td class="result-item-value">{{result.sugars}}</td>
                    <th>New Sugars(g)</th><td class="result-item-value">{{$ctrl.result.newSugars}}</td>
                </tr>
                <tr>
            
                    <th>Fiber(g)</th>  <td class="result-item-value">{{result.fiber }}</td>
                    <th>New Fiber(g)</th><td class="result-item-value">{{$ctrl.result.newFiber}}</td>
                </tr>
                <tr>
                    <th>Total Fats(g)</th> <td class="result-item-value">{{result.totalFats }}</td>
                    <th>New Total Fats(g)</th><td class="result-item-value">{{$ctrl.result.newTotalFats}}</td>
                </tr>
                <tr>
                    <th>Saturated Fats(g)</th>
                    <td class="result-item-value">{{result.saturatedFats}}</td>
                    <th>New Saturated Fats (g)</th><td class="result-item-value">{{$ctrl.result.newSaturatedFats}}</td>
                </tr>
                <tr>
                    <th>Protein(g)</th> <td class="result-item-value">{{result.totalProtein}}</td>
                    <th>New Protein(g)</th><td class="result-item-value">{{$ctrl.result.newTotalProtein}}</td>
                </tr>
                
                
                <!--add rangebar to adjust serving size-->
            </table>

            <h4>Original Serving Size:  {{result.servingSize}}  {{result.servingUnit}}</h4>

            <form>
            <input type="range" name="rangeInput" min="0" max="1000" value="{{$ctrl.result.servingSize}}" ng-change="$ctrl.updateServingSize(this.value)" ng-model="$ctrl.result.newServingSize">
                <p>New serving size is {{$ctrl.result.newServingSize}}{{$ctrl.result.servingUnit}}</p>
                <p>{{$ctrl.result.servings}}servings</p>
            </form>

            <tr class="button-row">

            <td><button class="search-result-button" ng-click="$ctrl.addToMenu(result)">Add One Serving</button></td>

            <td><button class="search-result-button" ng-click="$ctrl.addThisAmount()">Add this Amount</button></td>

            <td><button class="search-result-button" ng-click="$ctrl.hideresultItem(result)">Hide Item View
            </button></td>


            </div>



        </div>
    </div>


    <div class="food-link-box">
        <a class="food-link" ng-click="$ctrl.toggleNew()">Add New Food Item</a>
        <div class="new-food" add="$ctrl.add" ng-show="$ctrl.viewNew === true" >
            <section ng-if="!$ctrl.user">
                <h2 class="white-text">You must be logged in to add new food items to the database.</h2>
            </section>
            <section ng-class="$ctrl.styles['add-class']" ng-if="$ctrl.user">
                <div>
                    <label>Name of Food:</label>
                    <input ng-model="$ctrl.name" placeholder="name">
                </div>

                <div>
                    <label>Barcode:</label>
                    <input ng-model="$ctrl.barcode" placeholder="barcode">
                </div>

                <div>
                    <label>Serving Unit:</label>
                    <select ng-model="$ctrl.servingUnit" ng-options="x for x in $ctrl.units" placeholder="serving unit">{{x}}</select>

                </div>

                    <div>
                    <label>Serving Size:</label>
                    <input ng-model="$ctrl.servingSize" placeholder="serving size">
                </div>

                <div>
                    <label>Calories (g):</label>
                    <input ng-model="$ctrl.Calories" placeholder="Calories">
                </div>

                <div>
                    <label>Total Carbs (g):</label>
                    <input ng-model="$ctrl.totalCarbs" placeholder="total carbs">
                </div>

                <div>
                    <label>Sugars (g):</label>
                    <input ng-model="$ctrl.sugars" placeholder="sugars">
                </div>

                <div>
                    <label>Fiber (g):</label>
                    <input ng-model="$ctrl.fiber" placeholder="fiber">
                </div>

                <div>
                    <label>Total Fats (g):</label>
                    <input ng-model="$ctrl.totalFats" placeholder="total fats">
                </div>
                
                <div>
                    <label>Unsaturated Fats (g):</label>
                    <input ng-model="$ctrl.unsaturatedFats" placeholder="unsaturated fats">
                </div>

                <div>
                    <label>Saturated Fats (g):</label>
                    <input ng-model="$ctrl.saturatedFats" placeholder="saturated fats">
                </div>

                <div>
                    <label>Total Protein (g):</label>
                    <input ng-model="$ctrl.totalProtein" placeholder="total protein">
                </div>
    
                <button class="viewButton" ng-click=$ctrl.addNew()>Add Food</button>
            </section>
        </div>
    </div>
          
    <div class="food-link-box">
        <a class="food-link" ui-sref="results">Add Food from results</a>
    </div>
</section>